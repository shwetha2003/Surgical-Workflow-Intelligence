name: CI

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pandas numpy scikit-learn plotly dash faker pytest
        
    - name: Verify Python imports
      run: |
        python -c "import pandas as pd; print('✓ Pandas', pd.__version__)"
        python -c "import numpy as np; print('✓ NumPy', np.__version__)"
        python -c "import plotly; print('✓ Plotly', plotly.__version__)"
        python -c "import sklearn; print('✓ Scikit-learn', sklearn.__version__)"
        
    - name: Test basic functionality
      run: |
        python -c "
# Test data generation
import sys
sys.path.append('src')
try:
    from data_loader import SurgicalDataLoader
    print('✓ Successfully imported SurgicalDataLoader')
    
    # Test basic functionality
    loader = SurgicalDataLoader()
    procedures, tools, notes, sensor = loader.generate_sample_data(5)
    print(f'✓ Generated data: {len(procedures)} procedures, {len(tools)} tool records')
    
except Exception as e:
    print(f'✗ Error: {e}')
    # Don't fail the build for import issues in development
        "
